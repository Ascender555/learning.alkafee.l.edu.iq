(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-591afcb3"],{"3a2f":function(t,e,i){"use strict";i("9734");var a=i("4ad4"),s=i("a9ad"),o=i("16b7"),n=i("b848"),l=i("f573"),r=i("f2e7"),c=i("80d2"),h=i("d9bd"),d=i("58df");e["a"]=Object(d["a"])(s["a"],o["a"],n["a"],l["a"],r["a"]).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,fixed:{type:Boolean,default:!0},openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:()=>({calculatedMinWidth:0,closeDependents:!1}),computed:{calculatedLeft(){const{activator:t,content:e}=this.dimensions,i=!this.bottom&&!this.left&&!this.top&&!this.right,a=!1!==this.attach?t.offsetLeft:t.left;let s=0;return this.top||this.bottom||i?s=a+t.width/2-e.width/2:(this.left||this.right)&&(s=a+(this.right?t.width:-e.width)+(this.right?10:-10)),this.nudgeLeft&&(s-=parseInt(this.nudgeLeft)),this.nudgeRight&&(s+=parseInt(this.nudgeRight)),this.calcXOverflow(s,this.dimensions.content.width)+"px"},calculatedTop(){const{activator:t,content:e}=this.dimensions,i=!1!==this.attach?t.offsetTop:t.top;let a=0;return this.top||this.bottom?a=i+(this.bottom?t.height:-e.height)+(this.bottom?10:-10):(this.left||this.right)&&(a=i+t.height/2-e.height/2),this.nudgeTop&&(a-=parseInt(this.nudgeTop)),this.nudgeBottom&&(a+=parseInt(this.nudgeBottom)),this.calcYOverflow(a+this.pageYOffset)+"px"},classes(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY(){return this.top||this.bottom},offsetX(){return this.left||this.right},styles(){return{left:this.calculatedLeft,maxWidth:Object(c["h"])(this.maxWidth),minWidth:Object(c["h"])(this.minWidth),opacity:this.isActive?.9:0,top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount(){this.$nextTick(()=>{this.value&&this.callActivate()})},mounted(){"v-slot"===Object(c["u"])(this,"activator",!0)&&Object(h["b"])("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate(){this.runDelay("close")},genActivatorListeners(){const t=a["a"].options.methods.genActivatorListeners.call(this);return t.focus=t=>{this.getActivator(t),this.runDelay("open")},t.blur=t=>{this.getActivator(t),this.runDelay("close")},t.keydown=t=>{t.keyCode===c["z"].esc&&(this.getActivator(t),this.runDelay("close"))},t},genActivatorAttributes(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition(){const t=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[t]):t},genContent(){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:{[this.contentClass]:!0,menuable__content__active:this.isActive,"v-tooltip__content--fixed":this.activatorFixed},style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render(t){return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent(()=>[this.genTransition()]),this.genActivator()])}})},"52e1":function(t,e,i){"use strict";i("b1b8")},"6d28":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"px-4"},[i("v-card",{staticClass:"d-flex align-center rounded-lg ma-4 pa-2",attrs:{flat:""}},[i("v-row",[i("v-col",{staticClass:"py-0 my-0",attrs:{cols:"12",md:"6",sm:"12"}},[i("v-switch",{staticClass:"mx-1",attrs:{color:"success",label:t.$t("mail.ViewArchivedMail")},on:{change:t.getMails},model:{value:t.switch1,callback:function(e){t.switch1=e},expression:"switch1"}})],1),i("v-col",{class:"ar"==t.$i18n.locale?"text-left mt-1":"text-right mt-1",attrs:{cols:"12",md:"6",sm:"12"}},[i("v-btn",{staticClass:"mx-1",attrs:{color:"primary",outlined:"",loading:t.loadingMakeAsRead,disabled:!t.rowKeysSelected.length>0},on:{click:t.makeAsRead}},[i("v-icon",{attrs:{left:""}},[t._v(" mdi-flag-variant ")]),t._v("\n          "+t._s(t.$t("mail.SelectAsRead"))+"\n        ")],1),t.switch1?i("v-btn",{staticClass:"mx-1",attrs:{color:"success",outlined:"",loading:t.loadingArchiveMail,disabled:!t.rowKeysSelected.length>0},on:{click:t.unArchiveMail}},[i("v-icon",{attrs:{left:""}},[t._v(" mdi-archive-arrow-up ")]),t._v("\n          "+t._s(t.$t("mail.CancelArchivingMail"))+"\n        ")],1):i("v-btn",{staticClass:"mx-1",attrs:{color:"success",outlined:"",loading:t.loadingArchiveMail,disabled:!t.rowKeysSelected.length>0},on:{click:t.archiveMail}},[i("v-icon",{attrs:{left:""}},[t._v(" mdi-archive-arrow-down ")]),t._v("\n          "+t._s(t.$t("mail.ArchiveMail"))+"\n        ")],1)],1)],1)],1),i("v-row",{staticClass:"px-4"},[i("v-col",{attrs:{cols:"12",md:"12",sm:"12"}},[i("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:t.$t("writeWhatYouSearch"),outlined:"",dense:"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),i("v-row",[i("v-col",{attrs:{cols:"12",md:"12",sm:"12"}},[i("v-card",{staticClass:"d-flex align-center rounded-lg mx-4 pa-2 pb-0",attrs:{flat:""}},[i("v-card-text",[i("v-data-table",{attrs:{headers:t._headers,items:t.mails,search:t.search,"item-key":"guid","show-select":"",width:"100%",loading:t.loadingData},scopedSlots:t._u([{key:"item.isRead",fn:function(e){var a=e.item;return[a.isRead?i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,s=e.attrs;return[i("v-icon",t._g(t._b({},"v-icon",s,!1),a),[t._v("mdi-email-open")])]}}],null,!0)},[i("span",[t._v(t._s(t.$t("mail.Read")))])]):i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,s=e.attrs;return[i("v-icon",t._g(t._b({attrs:{color:"pink lighten-1"}},"v-icon",s,!1),a),[t._v("mdi-email")])]}}],null,!0)},[i("span",[t._v(t._s(t.$t("mail.notReadable")))])])]}},{key:"item.attachedFileUrl",fn:function(e){var a=e.item;return[i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,o=e.attrs;return[a.attachedFileUrl?i("v-btn",t._g(t._b({attrs:{icon:"",color:"green"},on:{click:function(e){return t.installFile(a)}}},"v-btn",o,!1),s),[i("v-icon",[t._v("mdi-link-variant")])],1):t._e()]}}],null,!0)},[i("span",[t._v(t._s(t.$t("mail.DownloadTheAttachment")))])])]}},{key:"item.datex",fn:function(e){var a=e.item;return[i("div",[i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,o=e.attrs;return[i("p",t._g(t._b({},"p",o,!1),s),[t._v("\n                      "+t._s(a.datex2)+"\n                    ")])]}}],null,!0)},[i("span",[t._v(t._s(a.datex))])])],1)]}},{key:"item.fullSectionPath",fn:function(e){var a=e.item;return[i("div",[i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,s=e.attrs;return[i("p",t._g(t._b({},"p",s,!1),a),[i("v-icon",[t._v("mdi-information-outline")])],1)]}}],null,!0)},[i("span",[t._v(t._s(a.fullSectionPath))])])],1)]}},{key:"item.actions",fn:function(e){var a=e.item;return[i("div",[i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,o=e.attrs;return[i("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},on:{click:function(e){return t.showMail(a)}}},"v-btn",o,!1),s),[i("v-icon",[t._v("mdi-eye")])],1)]}}],null,!0)},[i("span",[t._v(t._s(t.$t("Preview")))])]),i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,o=e.attrs;return[i("v-btn",t._g(t._b({attrs:{icon:"",color:""},on:{click:function(e){return t.replyDialog(a)}}},"v-btn",o,!1),s),[i("v-icon",[t._v("mdi-reply")])],1)]}}],null,!0)},[i("span",[t._v(t._s(t.$t("mail.reply")))])])],1)]}}],null,!0),model:{value:t.rowKeysSelected,callback:function(e){t.rowKeysSelected=e},expression:"rowKeysSelected"}})],1)],1)],1)],1),i("ReplyMail",{ref:"ReplyMailComponent",on:{"send-result-values":t.getMails}})],1)},s=[],o=i("18f3"),n=i("c1df"),l=i.n(n),r={components:{ReplyMail:o["default"]},data(){return{search:"",loadingData:!1,loadingMakeAsRead:!1,loadingArchiveMail:!1,dataGridRefName:"dataGrid",switch1:0,pageSizes:[5,10,20],rtlEnabled:!0,allMode:"allPages",checkBoxesMode:"onClick",mails:[],rowKeysSelected:[],headers:[{text:this.$t("mail.status"),value:"isRead",show:!0},{text:this.$t("mail.subjectName"),value:"subjectName",show:!0},{text:this.$t("mail.from"),value:"fromName",show:!0},{text:this.$t("mail.title"),value:"title",show:!0},{text:this.$t("mail.Attachments"),value:"attachedFileUrl",show:!0},{text:this.$t("date"),value:"datex",show:!0},{text:this.$t("mail.Section"),value:"fullSectionPath",show:this.isInRole(2)},{text:this.$t("mail.actions"),value:"actions",show:!0}]}},computed:{_headers(){return this.headers.filter(t=>t.show)}},methods:{replyDialog(t){this.$refs.ReplyMailComponent.setValue(t.guid)},archiveMail(){if(!this.rowKeysSelected||0==this.rowKeysSelected.length)return;this.loadingArchiveMail=!0;const t={archiving:!0,mailType:0,mailGuids:this.rowKeysSelected.map(t=>t.guid)};this.axios.post("Mails/Archiving",t).then(()=>{this.getMails()}).catch(()=>{this.$swal.fire({title:this.$t("AnErrorOccurredDuringTheProcess"),text:"",icon:"error",confirmButtonText:this.$t("close")})}).finally(()=>{this.loadingArchiveMail=!1})},unArchiveMail(){if(!this.rowKeysSelected||0==this.rowKeysSelected.length)return;this.loadingArchiveMail=!0;const t={archiving:!1,mailType:0,mailGuids:this.rowKeysSelected.map(t=>t.guid)};this.axios.post("Mails/Archiving",t).then(()=>{this.getMails()}).catch(()=>{this.$swal.fire({title:this.$t("AnErrorOccurredDuringTheProcess"),text:"",icon:"error",confirmButtonText:this.$t("close")})}).finally(()=>{this.loadingArchiveMail=!1})},makeAsRead(){this.rowKeysSelected&&0!=this.rowKeysSelected.length&&(this.loadingMakeAsRead=!0,this.axios.post("Mails/MarkAsRead",this.rowKeysSelected.map(t=>t.guid)).then(()=>{this.getMails()}).catch(()=>{this.$swal.fire({title:this.$t("AnErrorOccurredDuringTheProcess"),text:"",icon:"error",confirmButtonText:this.$t("close")})}).finally(()=>{this.loadingMakeAsRead=!1}))},showMail(t){t.isRead||this.axios.post("Mails/MarkAsRead",[t.guid]).then(()=>{}).catch(()=>{}).finally(()=>{}),this.$router.push({path:`showMail=${t.guid}&0`,params:{id:t.guid,type:0}})},installFile(t){window.open(""+t.attachedFileUrl)},getMails(){this.loadingData=!0;const t=this.switch1?1:0;this.axios.get("Mails/Get?mailType=0&archiving="+t).then(t=>{this.rowKeysSelected=[],this.mails=t.data.data,this.mails.forEach(t=>{t.datex2=l()(t.datex).fromNow(),t.datex=l()(t.datex).format("YYYY/MM/DD - h:mm a ")})}).catch(()=>{}).finally(()=>{this.loadingData=!1})}},created(){this.getMails()}},c=r,h=(i("52e1"),i("2877")),d=i("6544"),u=i.n(d),v=i("8336"),p=i("b0afa"),m=i("99d9"),f=i("62ad"),g=i("8fea"),w=i("132d"),y=i("0fd9"),b=i("b73d"),_=i("8654"),x=i("3a2f"),M=Object(h["a"])(c,a,s,!1,null,null,null);e["default"]=M.exports;u()(M,{VBtn:v["a"],VCard:p["a"],VCardText:m["c"],VCol:f["a"],VDataTable:g["a"],VIcon:w["a"],VRow:y["a"],VSwitch:b["a"],VTextField:_["a"],VTooltip:x["a"]})},9734:function(t,e,i){},b1b8:function(t,e,i){}}]);
//# sourceMappingURL=chunk-591afcb3.7af128e4.js.map